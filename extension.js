import St from "gi://St";
import GObject from "gi://GObject";

import {
  Extension,
  gettext as _,
} from "resource:///org/gnome/shell/extensions/extension.js";
import * as PanelMenu from "resource:///org/gnome/shell/ui/panelMenu.js";
import * as PopupMenu from "resource:///org/gnome/shell/ui/popupMenu.js";
import * as Main from "resource:///org/gnome/shell/ui/main.js";

const Indicator = GObject.registerClass(
  class Indicator extends PanelMenu.Button {
    _init() {
      super._init(0.0, _("ASCII Emoji"));

      this.add_child(
        new St.Label({
          text: "(◉‿◉)",
          style_class: "system-status-icon",
        })
      );

      this.searchEntry = new St.Entry({
        name: "searchEntry",
        hint_text: _("Type to search..."),
        track_hover: true,
        x_expand: true,
        can_focus: true,
      });
      this.menu.box.add_child(this.searchEntry);
      this.searchEntry
        .get_clutter_text()
        .connect("text-changed", this._refreshItems.bind(this));

      this.clipboard = St.Clipboard.get_default();

      this._menuItems = [];
      this._refreshItems();
    }
    _refreshItems() {
      this._menuItems.forEach((item) => item.destroy());
      this._menuItems.length = 0;

      const query = this.searchEntry.get_text().toLowerCase();
      const matchedEmojis = allEmojis
        .filter((emoji) => emoji[0].toLowerCase().includes(query))
        .slice(0, 7);

      matchedEmojis.forEach((emoji) => {
        let item = new PopupMenu.PopupMenuItem(`${emoji[0]} ${emoji[1]}`);
        item.connect("activate", () => {
          this.clipboard.set_text(St.ClipboardType.CLIPBOARD, emoji[1]);
        });
        this.menu.addMenuItem(item);
        this._menuItems.push(item);
      });
    }
  }
);

export default class IndicatorExampleExtension extends Extension {
  enable() {
    this._indicator = new Indicator();
    Main.panel.addToStatusArea(this.uuid, this._indicator);
  }

  disable() {
    this._indicator.destroy();
    this._indicator = null;
  }
}
const allEmojis = [
  ["acid", "⊂(◉‿◉)つ"],
  ["afraid", "(ㆆ _ ㆆ)"],
  ["alpha", "α"],
  ["angel", "☜(⌒▽⌒)☞"],
  ["angry", "•`_´•"],
  ["arrowhead", "⤜(ⱺ ʖ̯ⱺ)⤏"],
  ["ass, butt", "(‿|‿)"],
  ["awkward", "•͡˘㇁•͡˘"],
  ["bear, koala", "ʕ·͡ᴥ·ʔ﻿"],
  ["bearflip", "ʕノ•ᴥ•ʔノ ︵ ┻━┻"],
  ["bearhug", "ʕっ•ᴥ•ʔっ"],
  ["because, since", "∵"],
  ["beta", "β"],
  ["bigheart", "❤"],
  ["bitcoin", "₿"],
  ["blackeye", "0__#"],
  ["blubby", "( 0 _ 0 )"],
  ["blush", "(˵ ͡° ͜ʖ ͡°˵)"],
  ["bond, 007", "┌( ͝° ͜ʖ͡°)=ε/̵͇̿̿/’̿’̿ ̿"],
  ["boobs", "( . Y . )"],
  ["bored", "(-_-)"],
  ["bribe", "( •͡˘ _•͡˘)ノð"],
  ["bubbles", "( ˘ ³˘)ノ°ﾟº❍｡"],
  ["butterfly", "ƸӜƷ"],
  ["cat", "(= ФェФ=)"],
  ["catlenny", "( ͡° ᴥ ͡°)﻿"],
  ["check", "✔"],
  ["cheer", "※(^o^)/※"],
  ["chubby", "╭(ʘ̆~◞౪◟~ʘ̆)╮"],
  ["claro", "(͡ ° ͜ʖ ͡ °)"],
  ["clique, gang, squad", "ヽ༼ ຈل͜ຈ༼ ▀̿̿Ĺ̯̿̿▀̿ ̿༽Ɵ͆ل͜Ɵ͆ ༽ﾉ"],
  ["cloud", "☁"],
  ["club", "♣"],
  ["coffee, cuppa", "c[_]"],
  ["cmd, command", "⌘"],
  ["cool, csi", "(•_•) ( •_•)>⌐■-■ (⌐■_■)"],
  ["copy, c", "©"],
  ["creep", "ԅ(≖‿≖ԅ)"],
  ["creepcute", "ƪ(ړײ)‎ƪ​​"],
  ["crim3s", "( ✜︵✜ )"],
  ["cross", "†"],
  ["cry", "(╥﹏╥)"],
  ["crywave", "( ╥﹏╥) ノシ"],
  ["cute", "(｡◕‿‿◕｡)"],
  ["d1", "⚀"],
  ["d2", "⚁"],
  ["d3", "⚂"],
  ["d4", "⚃"],
  ["d5", "⚄"],
  ["d6", "⚅"],
  ["dab", "ヽ( •_)ᕗ"],
  ["damnyou", "(ᕗ ͠° ਊ ͠° )ᕗ"],
  ["dance", "ᕕ(⌐■_■)ᕗ ♪♬"],
  ["dead", "x⸑x"],
  ["dealwithit, dwi", "(⌐■_■)"],
  ["delta", "Δ"],
  ["depressed", "(︶︹︶)"],
  ["derp", "☉ ‿ ⚆"],
  ["diamond", "♦"],
  ["dj", "d[-_-]b"],
  ["dog", "(◕ᴥ◕ʋ)"],
  ["dollar", "$"],
  ["dong", "(̿▀̿ ̿Ĺ̯̿̿▀̿ ̿)̄"],
  ["donger", "ヽ༼ຈل͜ຈ༽ﾉ"],
  ["dontcare, idc", "(- ʖ̯-)"],
  ["dontwant", "ヽ(｀Д´)ﾉ"],
  ["dope", "<(^_^)>"],
  ["doubleflat", "𝄫"],
  ["doublesharp", "𝄪"],
  ["doubletableflip", "┻━┻ ︵ヽ(`Д´)ﾉ︵ ┻━┻"],
  ["down", "↓"],
  ["duckface", "(・3・)"],
  ["duel", "ᕕ(╭ರ╭ ͟ʖ╮•́)⊃¤=(————-"],
  ["duh", "(≧︿≦)"],
  ["dunno", "¯(°_o)/¯"],
  ["ebola", "ᴇʙᴏʟᴀ"],
  ["eeriemob", "(-(-_-(-_(-_(-_-)_-)-_-)_-)_-)-)"],
  ["emptystar", "☆"],
  ["emptytriangle, t2", "△"],
  ["endure", "(҂◡_◡) ᕤ"],
  ["envelope, letter", "✉︎"],
  ["epsilon", "ɛ"],
  ["euro", "€"],
  ["evil", "ψ(｀∇´)ψ"],
  ["evillenny", "(͠≖ ͜ʖ͠≖)"],
  ["excited", "(ﾉ◕ヮ◕)ﾉ*:・ﾟ✧"],
  ["execution", "(⌐■_■)︻╦╤─ (╥﹏╥)"],
  ["facebook", "(╯°□°)╯︵ ʞooqǝɔɐɟ"],
  ["facepalm", "(－‸ლ)"],
  ["fancytext", "вєωαяє, ι αм ƒαη¢у!"],
  ["fart", "(ˆ⺫ˆ๑)<3"],
  ["fight", "(ง •̀_•́)ง"],
  ["finn", "| (• ◡•)|"],
  ["fish", '<"(((<3'],
  ["5, five", "卌"],
  ["flat, bemolle", "♭"],
  ["flexing", "ᕙ(`▽´)ᕗ"],
  ["fliptext", "ǝןqɐʇ ɐ ǝʞıן ǝɯ dıןɟ"],
  ["fliptexttable", "(ノ ゜Д゜)ノ ︵ ǝןqɐʇ ɐ ǝʞıן ʇxǝʇ dıןɟ"],
  ["flipped, heavytable", "┬─┬﻿ ︵ /(.□. ）"],
  ["flower, flor", "(✿◠‿◠)"],
  ["f", "✿"],
  ["fly", "─=≡Σ((( つ◕ل͜◕)つ"],
  ["friendflip", "(╯°□°)╯︵ ┻━┻ ︵ ╯(°□° ╯)"],
  ["frown", "(ღ˘⌣˘ღ)"],
  ["fuckoff, gtfo", "୧༼ಠ益ಠ╭∩╮༽"],
  ["fuckyou, fu", "┌П┐(ಠ_ಠ)"],
  ["gentleman, sir, monocle", "ಠ_ರೃ"],
  ["ghast", "= _ ="],
  ["ghost", "༼ つ ╹ ╹ ༽つ"],
  ["gift, present", "(´・ω・)っ由"],
  ["gimme", "༼ つ ◕_◕ ༽つ"],
  ["givemeyourmoney", "(•-•)⌐"],
  ["glitter", "(*・‿・)ノ⌒*:･ﾟ✧"],
  ["glasses", "(⌐ ͡■ ͜ʖ ͡■)"],
  ["glassesoff", "( ͡° ͜ʖ ͡°)ﾉ⌐■-■"],
  ["glitterderp", "(ﾉ☉ヮ⚆)ﾉ ⌒*:･ﾟ✧"],
  ["gloomy", "(_゜_゜_)"],
  ["goatse", "(з๏ε)"],
  ["gotit", "(☞ﾟ∀ﾟ)☞"],
  ["greet, greetings", "( ´◔ ω◔`) ノシ"],
  ["gun, mg", "︻╦╤─"],
  ["hadouken", "༼つಠ益ಠ༽つ ─=≡ΣO))"],
  ["hammerandsickle, hs", "☭"],
  ["handleft, hl", "☜"],
  ["handright, hr", "☞"],
  ["haha", "٩(^‿^)۶"],
  ["happy", "٩( ๑╹ ꇴ╹)۶"],
  ["happygarry", "ᕕ( ᐛ )ᕗ"],
  ["h, heart", "♥"],
  ["hello, ohai, bye", "(ʘ‿ʘ)╯"],
  ["help", "(°Ω°)/"],
  ["highfive", "._.)/(._."],
  ["hitting", "( ｀皿´)｡ﾐ/"],
  ["hug, hugs", "(づ｡◕‿‿◕｡)づ"],
  ["iknowright, ikr", "┐｜･ิω･ิ#｜┌"],
  ["illuminati", "୧(▲ᴗ▲)ノ"],
  ["infinity, inf", "∞"],
  ["inlove", "(っ´ω`c)♡"],
  ["int", "∫"],
  ["internet", "ଘ(੭*ˊᵕˋ)੭* ̀ˋ ɪɴᴛᴇʀɴᴇᴛ"],
  ["interrobang", "‽"],
  ["jake", "(❍ᴥ❍ʋ)"],
  ["kappa", "(¬,‿,¬)"],
  ["kawaii", "≧◡≦"],
  ["keen", "┬┴┬┴┤Ɵ͆ل͜Ɵ͆ ༽ﾉ"],
  ["kiahh", "~(≧▽≦)/~"],
  ["kiss", "(づ ￣ ³￣)づ"],
  ["kyubey", "／人◕ ‿‿ ◕人＼"],
  ["lambda", "λ"],
  ["lazy", "_(:3」∠)_"],
  ["lenny", "( ͡° ͜ʖ ͡°)"],
  ["lennybill", "[̲̅$̲̅(̲̅ ͡° ͜ʖ ͡°̲̅)̲̅$̲̅]"],
  ["lennyfight", "(ง ͠° ͟ʖ ͡°)ง"],
  ["lennyflip", "(ノ ͡° ͜ʖ ͡°ノ) ︵ ( ͜。 ͡ʖ ͜。)"],
  ["lennygang", "( ͡°( ͡° ͜ʖ( ͡° ͜ʖ ͡°)ʖ ͡°) ͡°)"],
  ["lennyshrug", "¯_( ͡° ͜ʖ ͡°)_/¯"],
  ["lennysir", "( ಠ ͜ʖ ರೃ)"],
  ["lennystalker", "┬┴┬┴┤( ͡° ͜ʖ├┬┴┬┴"],
  ["lennystrong", "ᕦ( ͡° ͜ʖ ͡°)ᕤ"],
  ["lennywizard", "╰( ͡° ͜ʖ ͡° )つ──☆*:・ﾟ"],
  ["loading", "███▒▒▒▒▒▒▒"],
  ["lol", "L(° O °L)"],
  ["look", "(ಡ_ಡ)☞"],
  ["loud, noise", "ᕦ(⩾﹏⩽)ᕥ"],
  ["love", "♥‿♥"],
  ["lovebear", "ʕ♥ᴥ♥ʔ"],
  ["lumpy", "꒰ ꒡⌓꒡꒱"],
  ["luv", "-`ღ´-"],
  ["magic", "ヽ(｀Д´)⊃━☆ﾟ. * ･ ｡ﾟ,"],
  ["magicflip", "(/¯◡ ‿ ◡)/¯ ~ ┻━┻"],
  ["meep", "(°^°)/"],
  ["meh", "ಠ_ಠ"],
  ["metal, rock", "m/,(> . <)_m/"],
  ["mistyeyes", "ಡ_ಡ"],
  ["monster", "༼ ༎ຶ ෴ ༎ຶ༽"],
  ["natural", "♮"],
  ["needle, inject", "┌(◉ ͜ʖ◉)つ┣▇▇▇═──"],
  ["nerd", "(⌐⊙_⊙)"],
  ["nice", "( ͡° ͜ °)"],
  ["no", "→_←"],
  ["noclue", "／人◕ __ ◕人＼"],
  ["nom, yummy, delicious", "(っˆڡˆς)"],
  ["note, sing", "♫"],
  ["nuclear, radioactive, nukular", "☢"],
  ["nyan", "~=[,,_,,]:3"],
  ["nyeh", "@^@"],
  ["ohshit", "( º﹃º )"],
  ["omega", "Ω"],
  ["omg", "◕_◕"],
  ["opt, option", "⌥"],
  ["orly", "(눈_눈)"],
  ["ohyou, ou", "(◞థ౪థ)ᴖ"],
  ["peace, victory", "✌(-‿-)✌"],
  ["pear", "(__>-"],
  ["pi", "π"],
  ["pingpong", "( •_•)O*¯`·.¸.·´¯`°Q(•_• )"],
  ["plain", "._."],
  ["pleased", "(˶‾᷄ ⁻̫ ‾᷅˵)"],
  ["point", "(☞ﾟヮﾟ)☞"],
  ["pooh", "ʕ •́؈•̀)"],
  ["porcupine", "(•ᴥ• )́`́'́`́'́⻍"],
  ["pound", "£"],
  ["praise", "(☝ ՞ਊ ՞)☝"],
  ["punch", "O=('-'Q)"],
  ["rage, mad", "t(ಠ益ಠt)"],
  ["rageflip", "(ノಠ益ಠ)ノ彡┻━┻"],
  ["rainbowcat", "(=^･ｪ･^=))ﾉ彡☆"],
  ["really", "ò_ô"],
  ["r", "®"],
  ["riot", "୧༼ಠ益ಠ༽୨"],
  ["rolldice", "⚄"],
  ["rolleyes", "(◔_◔)"],
  ["rose", "✿ڿڰۣ—"],
  ["run", "(╯°□°)╯"],
  ["sad", "ε(´סּ︵סּ`)з"],
  ["saddonger", "ヽ༼ຈʖ̯ຈ༽ﾉ"],
  ["sadlenny", "( ͡° ʖ̯ ͡°)"],
  ["sharp, diesis", "♯"],
  ["shout", "╚(•⌂•)╝"],
  ["shrug", "¯_(ツ)_/¯"],
  ["shy", "=^_^="],
  ["sigma, sum", "Σ"],
  ["skull", "☠"],
  ["smile", "ツ"],
  ["smiley", "☺︎"],
  ["smirk", "¬‿¬"],
  ["snowman", "☃"],
  ["sob", "(;´༎ຶД༎ຶ`)"],
  ["spade", "♠"],
  ["sqrt", "√"],
  ["squid", "<コ:彡"],
  ["star", "★"],
  ["strong", "ᕙ(⇀‸↼‶)ᕗ"],
  ["suicide", "ε/̵͇̿̿/’̿’̿ ̿(◡︵◡)"],
  ["sum", "∑"],
  ["sun", "☀"],
  ["surprised", "(๑•́ ヮ •̀๑)"],
  ["surrender", "_(-_-)_/"],
  ["stalker", "┬┴┬┴┤(･_├┬┴┬┴"],
  ["swag", "(̿▀̿‿ ̿▀̿ ̿)"],
  ["sword", "o()xxxx[{::::::::::::::::::>"],
  ["tabledown", "┬─┬﻿ ノ( ゜-゜ノ)"],
  ["tableflip", "(ノ ゜Д゜)ノ ︵ ┻━┻"],
  ["tau", "τ"],
  ["tears", "(ಥ﹏ಥ)"],
  ["terrorist", "୧༼ಠ益ಠ༽︻╦╤─"],
  ["thanks, thankyou, ty", "(^-^)/"],
  ["therefore, so", "⸫"],
  ["this", "( ͡° ͜ʖ ͡°)_/¯"],
  ["tiefighter", "|=-(¤)-=|"],
  ["tired", "(=____=)"],
  ["toldyouso, toldyou", "☜(꒡⌓꒡)"],
  ["toogood", "ᕦ(òᴥó)ᕥ"],
  ["triangle, t", "▲"],
  ["unflip", "┬──┬ ノ(ò_óノ)"],
  ["up", "↑"],
  ["victory", "(๑•̀ㅂ•́)ง✧"],
  ["wat", "(ÒДÓױ)"],
  ["wave", "( * ^ *) ノシ"],
  ["whaa", "Ö"],
  ["whistle", "(っ^з^)♪♬"],
  ["whoa", "(°o•)"],
  ["why", "ლ(`◉◞౪◟◉‵ლ)"],
  ["witchtext", "WHΣИ $HΛLL WΣ †HЯΣΣ MΣΣ† ΛGΛ|И?"],
  ["woo", "＼(＾O＾)／"],
  ["wtf", "(⊙＿⊙')"],
  ["wut", "⊙ω⊙"],
  ["yay", "( ﾟヮﾟ)/"],
  ["yeah, yes", "(•̀ᴗ•́)و ̑̑"],
  ["yen", "¥"],
  ["yinyang, yy", "☯"],
  ["yolo", "Yᵒᵘ Oᶰˡʸ Lᶤᵛᵉ Oᶰᶜᵉ"],
  ["youkids, ukids", "ლ༼>╭ ͟ʖ╮<༽ლ"],
  ["yuno", "(屮ﾟДﾟ)屮 Y U NO"],
  ["zen, meditation, omm", "⊹╰(⌣ʟ⌣)╯⊹"],
  ["zoidberg", "(V) (°,,,,°) (V)"],
  ["zombie", "[¬º-°]¬"],
];
